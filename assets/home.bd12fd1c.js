import{d as N,j as v,k as R,m as S,l as $,o as j,n as g,q as P,c,s as E,v as z,t as k,a,F as I,x as b,y,b as G,p as J,f as K,g as r,z as C,u as O,r as Q,i as U}from"./index.74340c31.js";import{e as M}from"./bus.386a0429.js";const X=p=>(J("data-v-4fda56ec"),p=p(),K(),p),Y={class:"main-container"},Z={class:"sidebar",id:"sidebarScroll"},ee={class:"title"},te=["onClick"],se={class:"content-slidebar"},oe={class:"content-section"},ne=X(()=>a("p",{class:"content-title"},"\u5185\u5BB9\u5BFC\u822A",-1)),ae=["onClick"],le={class:"desc"},ce=N({__name:"home",setup(p){var B;const T=O(),u=v(sessionStorage.getItem("mIndex")||"0"),_=v(!1),n=R({contentList:[],topList:[]}),d=v(null);v(null),n.contentList=(B=S[0].list[0])==null?void 0:B.content,$(()=>T.currentRoute.value,t=>{u.value=sessionStorage.getItem("mIndex"),g(()=>{var e;(e=document.querySelector(".sidebarLi.active"))==null||e.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"}),h(0),f()})},{immediate:!0});const V=(t,e,s)=>{var o;u.value=e+"-"+s,console.log(u.value),n.contentList=(o=S[e].list[s])==null?void 0:o.content,T.push({path:t.path}),sessionStorage.setItem("mIndex",u.value)},h=t=>{let e=n.contentList;e&&e.forEach((s,o)=>{s.active=!1,o==t&&(s.active=!0)}),n.contentList=e},q=()=>{_.value=!0},D=()=>{_.value=!1},f=()=>{let t=document.querySelectorAll("h2"),e=[];t.forEach(s=>{e.push(s.offsetTop)}),n.topList=e};let L=!1;const F=t=>{var e;h(t),L=!0,(e=d.value)==null||e.scrollTo({top:n.topList[t]-70,left:0,behavior:"smooth"}),setTimeout(()=>{L=!1},500)},W=()=>{if(L)return;const t=d.value.scrollTop;for(let e=0;e<n.topList.length;e++)if(t>n.topList[e]-80&&t<=n.topList[e+1]-80){h(e);break}};let A=this;const H=(t,e)=>{let s=0;return function(){let o=A,l=arguments,i=new Date;i-s>e&&(s=i,t.apply(o,l))}};let m=v(!1);const x=()=>{window.innerWidth<800?m.value=!0:m.value=!1};return window.addEventListener("resize",()=>{x()}),j(()=>{x(),g(()=>{f(),d.value.addEventListener("scroll",H(W,200))}),M.on("previewChange",t=>{console.log("erer",t),setTimeout(()=>{f()},500)})}),P(()=>{M.off("previewChange"),g(()=>{d.value.removeEventListener("scroll",()=>{})})}),(t,e)=>{const s=Q("router-view");return r(),c("div",Y,[E(a("aside",{onMousemove:q,onMouseleave:D,class:y({"sidebar-scroll":_.value})},[a("div",Z,[(r(!0),c(I,null,b(k(S),(o,l)=>(r(),c("ul",{key:l},[a("p",ee,C(o.name),1),(r(!0),c(I,null,b(o.list,(i,w)=>(r(),c("li",{class:y(["sidebarLi",{active:u.value==l+"-"+w}]),key:w,onClick:re=>V(i,l,w)},C(i.name),11,te))),128))]))),128))])],34),[[z,!k(m)]]),a("main",{class:"app-main",ref_key:"mainScroll",ref:d},[G(s)],512),E(a("div",se,[a("div",oe,[ne,(r(!0),c(I,null,b(n.contentList,(o,l)=>(r(),c("ul",{key:l},[a("p",{onClick:i=>F(l),class:y(["nav-title",{selected:o.active}])},[a("span",le,C(o.title),1)],10,ae)]))),128))])],512),[[z,!k(m)]])])}}});const de=U(ce,[["__scopeId","data-v-4fda56ec"]]);export{de as default};
